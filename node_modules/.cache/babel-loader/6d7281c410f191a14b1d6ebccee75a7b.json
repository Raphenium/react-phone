{"ast":null,"code":"import _objectSpread from\"C:/Users/YEMI/Desktop/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{Component}from\"react\";import{storeProducts,detailProduct}from\"./data\";import{jsx as _jsx}from\"react/jsx-runtime\";const ProductContext=/*#__PURE__*/React.createContext();class ProductProvider extends Component{constructor(...args){super(...args);this.state={products:[],detailProduct:detailProduct,cart:[],modalOpen:false,modalProduct:detailProduct,cartSubTotal:0,cartTax:0,cartTotal:0};this.setProducts=()=>{let products=[];storeProducts.forEach(item=>{const singleItem=_objectSpread({},item);products=[...products,singleItem];});this.setState(()=>{return{products};},this.checkCartItems);};this.getItem=id=>{const product=this.state.products.find(item=>item.id===id);return product;};this.handleDetail=id=>{const product=this.getItem(id);this.setState(()=>{return{detailProduct:product};});};this.addToCart=id=>{let tempProducts=[...this.state.products];const index=tempProducts.indexOf(this.getItem(id));const product=tempProducts[index];product.inCart=true;product.count=1;const price=product.price;product.total=price;this.setState(()=>{return{products:[...tempProducts],cart:[...this.state.cart,product],detailProduct:_objectSpread({},product)};},this.addTotals);};this.openModal=id=>{const product=this.getItem(id);this.setState(()=>{return{modalProduct:product,modalOpen:true};});};this.closeModal=()=>{this.setState(()=>{return{modalOpen:false};});};this.increment=id=>{let tempCart=[...this.state.cart];const selectedProduct=tempCart.find(item=>{return item.id===id;});const index=tempCart.indexOf(selectedProduct);const product=tempCart[index];product.count=product.count+1;product.total=product.count*product.price;this.setState(()=>{return{cart:[...tempCart]};},this.addTotals);};this.decrement=id=>{let tempCart=[...this.state.cart];const selectedProduct=tempCart.find(item=>{return item.id===id;});const index=tempCart.indexOf(selectedProduct);const product=tempCart[index];product.count=product.count-1;if(product.count===0){this.removeItem(id);}else{product.total=product.count*product.price;this.setState(()=>{return{cart:[...tempCart]};},this.addTotals);}};this.getTotals=()=>{// const subTotal = this.state.cart\n//   .map(item => item.total)\n//   .reduce((acc, curr) => {\n//     acc = acc + curr;\n//     return acc;\n//   }, 0);\nlet subTotal=0;this.state.cart.map(item=>subTotal+=item.total);const tempTax=subTotal*0.1;const tax=parseFloat(tempTax.toFixed(2));const total=subTotal+tax;return{subTotal,tax,total};};this.addTotals=()=>{const totals=this.getTotals();this.setState(()=>{return{cartSubTotal:totals.subTotal,cartTax:totals.tax,cartTotal:totals.total};},()=>{// console.log(this.state);\n});};this.removeItem=id=>{let tempProducts=[...this.state.products];let tempCart=[...this.state.cart];const index=tempProducts.indexOf(this.getItem(id));let removedProduct=tempProducts[index];removedProduct.inCart=false;removedProduct.count=0;removedProduct.total=0;tempCart=tempCart.filter(item=>{return item.id!==id;});this.setState(()=>{return{cart:[...tempCart],products:[...tempProducts]};},this.addTotals);};this.clearCart=()=>{this.setState(()=>{return{cart:[]};},()=>{this.setProducts();this.addTotals();});};}componentDidMount(){this.setProducts();}render(){return/*#__PURE__*/_jsx(ProductContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{handleDetail:this.handleDetail,addToCart:this.addToCart,openModal:this.openModal,closeModal:this.closeModal,increment:this.increment,decrement:this.decrement,removeItem:this.removeItem,clearCart:this.clearCart}),children:this.props.children});}}const ProductConsumer=ProductContext.Consumer;export{ProductProvider,ProductConsumer};","map":{"version":3,"sources":["C:/Users/YEMI/Desktop/react/src/context.js"],"names":["React","Component","storeProducts","detailProduct","ProductContext","createContext","ProductProvider","state","products","cart","modalOpen","modalProduct","cartSubTotal","cartTax","cartTotal","setProducts","forEach","item","singleItem","setState","checkCartItems","getItem","id","product","find","handleDetail","addToCart","tempProducts","index","indexOf","inCart","count","price","total","addTotals","openModal","closeModal","increment","tempCart","selectedProduct","decrement","removeItem","getTotals","subTotal","map","tempTax","tax","parseFloat","toFixed","totals","removedProduct","filter","clearCart","componentDidMount","render","props","children","ProductConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { storeProducts, detailProduct } from \"./data\";\r\nconst ProductContext = React.createContext();\r\n\r\nclass ProductProvider extends Component {\r\n  state = {\r\n    products: [],\r\n    detailProduct: detailProduct,\r\n    cart: [],\r\n    modalOpen: false,\r\n    modalProduct: detailProduct,\r\n    cartSubTotal: 0,\r\n    cartTax: 0,\r\n    cartTotal: 0\r\n  };\r\n  componentDidMount() {\r\n    this.setProducts();\r\n  }\r\n\r\n  setProducts = () => {\r\n    let products = [];\r\n    storeProducts.forEach(item => {\r\n      const singleItem = { ...item };\r\n      products = [...products, singleItem];\r\n    });\r\n    this.setState(() => {\r\n      return { products };\r\n    }, this.checkCartItems);\r\n  };\r\n\r\n  getItem = id => {\r\n    const product = this.state.products.find(item => item.id === id);\r\n    return product;\r\n  };\r\n  handleDetail = id => {\r\n    const product = this.getItem(id);\r\n    this.setState(() => {\r\n      return { detailProduct: product };\r\n    });\r\n  };\r\n  addToCart = id => {\r\n    let tempProducts = [...this.state.products];\r\n    const index = tempProducts.indexOf(this.getItem(id));\r\n    const product = tempProducts[index];\r\n    product.inCart = true;\r\n    product.count = 1;\r\n    const price = product.price;\r\n    product.total = price;\r\n\r\n    this.setState(() => {\r\n      return {\r\n        products: [...tempProducts],\r\n        cart: [...this.state.cart, product],\r\n        detailProduct: { ...product }\r\n      };\r\n    }, this.addTotals);\r\n  };\r\n  openModal = id => {\r\n    const product = this.getItem(id);\r\n    this.setState(() => {\r\n      return { modalProduct: product, modalOpen: true };\r\n    });\r\n  };\r\n  closeModal = () => {\r\n    this.setState(() => {\r\n      return { modalOpen: false };\r\n    });\r\n  };\r\n  increment = id => {\r\n    let tempCart = [...this.state.cart];\r\n    const selectedProduct = tempCart.find(item => {\r\n      return item.id === id;\r\n    });\r\n    const index = tempCart.indexOf(selectedProduct);\r\n    const product = tempCart[index];\r\n    product.count = product.count + 1;\r\n    product.total = product.count * product.price;\r\n    this.setState(() => {\r\n      return {\r\n        cart: [...tempCart]\r\n      };\r\n    }, this.addTotals);\r\n  };\r\n  decrement = id => {\r\n    let tempCart = [...this.state.cart];\r\n    const selectedProduct = tempCart.find(item => {\r\n      return item.id === id;\r\n    });\r\n    const index = tempCart.indexOf(selectedProduct);\r\n    const product = tempCart[index];\r\n    product.count = product.count - 1;\r\n    if (product.count === 0) {\r\n      this.removeItem(id);\r\n    } else {\r\n      product.total = product.count * product.price;\r\n      this.setState(() => {\r\n        return { cart: [...tempCart] };\r\n      }, this.addTotals);\r\n    }\r\n  };\r\n  getTotals = () => {\r\n    // const subTotal = this.state.cart\r\n    //   .map(item => item.total)\r\n    //   .reduce((acc, curr) => {\r\n    //     acc = acc + curr;\r\n    //     return acc;\r\n    //   }, 0);\r\n    let subTotal = 0;\r\n    this.state.cart.map(item => (subTotal += item.total));\r\n    const tempTax = subTotal * 0.1;\r\n    const tax = parseFloat(tempTax.toFixed(2));\r\n    const total = subTotal + tax;\r\n    return {\r\n      subTotal,\r\n      tax,\r\n      total\r\n    };\r\n  };\r\n  addTotals = () => {\r\n    const totals = this.getTotals();\r\n    this.setState(\r\n      () => {\r\n        return {\r\n          cartSubTotal: totals.subTotal,\r\n          cartTax: totals.tax,\r\n          cartTotal: totals.total\r\n        };\r\n      },\r\n      () => {\r\n        // console.log(this.state);\r\n      }\r\n    );\r\n  };\r\n  removeItem = id => {\r\n    let tempProducts = [...this.state.products];\r\n    let tempCart = [...this.state.cart];\r\n\r\n    const index = tempProducts.indexOf(this.getItem(id));\r\n    let removedProduct = tempProducts[index];\r\n    removedProduct.inCart = false;\r\n    removedProduct.count = 0;\r\n    removedProduct.total = 0;\r\n\r\n    tempCart = tempCart.filter(item => {\r\n      return item.id !== id;\r\n    });\r\n\r\n    this.setState(() => {\r\n      return {\r\n        cart: [...tempCart],\r\n        products: [...tempProducts]\r\n      };\r\n    }, this.addTotals);\r\n  };\r\n  clearCart = () => {\r\n    this.setState(\r\n      () => {\r\n        return { cart: [] };\r\n      },\r\n      () => {\r\n        this.setProducts();\r\n        this.addTotals();\r\n      }\r\n    );\r\n  };\r\n  render() {\r\n    return (\r\n      <ProductContext.Provider\r\n        value={{\r\n          ...this.state,\r\n          handleDetail: this.handleDetail,\r\n          addToCart: this.addToCart,\r\n          openModal: this.openModal,\r\n          closeModal: this.closeModal,\r\n          increment: this.increment,\r\n          decrement: this.decrement,\r\n          removeItem: this.removeItem,\r\n          clearCart: this.clearCart\r\n        }}\r\n      >\r\n        {this.props.children}\r\n      </ProductContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nconst ProductConsumer = ProductContext.Consumer;\r\n\r\nexport { ProductProvider, ProductConsumer };\r\n"]},"metadata":{},"sourceType":"module"}